% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/hand_drawn.R
\name{panel_mask_from_plot}
\alias{panel_mask_from_plot}
\title{Pixel mask for the ggplot plotting region (panel + axes, optional)}
\usage{
panel_mask_from_plot(
  p,
  width,
  height,
  dpi,
  feather = 10,
  expand_px = c(0L, 0L),
  include_axes = TRUE,
  vp_min_in = c(0.25, 0.25),
  debug = FALSE,
  return_bbox = FALSE
)
}
\arguments{
\item{p}{ggplot object.}

\item{width, height, dpi}{Output device size (inches, DPI) used for both layout and mask.}

\item{feather}{Gaussian feather radius (px) for the mask edge.}

\item{expand_px}{Integer vector \code{c(x, y)} padding (px) added to each side.}

\item{include_axes}{Logical; if TRUE (default) include axis viewports in the union.}

\item{vp_min_in}{Numeric vector \code{c(w_in, h_in)} minimum inches to accept a viewport.}

\item{debug}{Logical; if TRUE, prints viewport names and bbox in pixels.}

\item{return_bbox}{Logical; if TRUE, returns a list with \code{mask} and \code{bbox}
(useful for caching or visual debug). Default FALSE returns just the mask.}
}
\value{
A \code{magick-image} mask (white = inside, black = outside); or a list if \code{return_bbox=TRUE}.
}
\description{
Builds a feathered rectangular mask in \emph{device pixels} that tightly covers
the visible plotting region. By default it unions the panel viewport(s) and
axis viewports, which matches user expectations when you want the wobble
confined to the “plot area with axes” while excluding titles/margins/legends.
}
